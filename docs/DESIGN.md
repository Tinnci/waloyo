# Waloyo UI/UX 设计指南

> *"设计不仅仅是看起来怎样、感觉怎样。设计是它如何运作的。"*  
> *— 史蒂夫·乔布斯*

本文档定义 Waloyo 应用的视觉设计语言和交互模式。在阅读本文档之前，建议先阅读 [PHILOSOPHY.md](PHILOSOPHY.md) 以理解设计决策背后的哲学基础。

---

## 第一部分：设计原则

### 1.1 隐喻优先 (Metaphor First)

Waloyo 的每一个视觉元素都服务于"风与雨"的核心隐喻。这不是装饰，而是**认知锚点**——帮助用户将抽象的"任务管理"概念映射到熟悉的自然现象。

| 抽象概念 | 隐喻象征 | 视觉表现 |
|---------|---------|---------|
| 未完成的任务 | 风 (Wind) | 动态、轻微摇摆、不安定 |
| 完成的动作 | 雨 (Rain) | 下落、消散、释放 |
| 全部完成 | 晴空 (Clear Sky) | 明亮、平静、温暖 |
| 高优先级 | 暴风 (Storm) | 红色、紧迫感 |
| 截止日期临近 | 乌云压境 | 视觉警告 |

### 1.2 减法美学 (Subtractive Aesthetics)

基于 [PHILOSOPHY.md](PHILOSOPHY.md) 中的"本质主义"原则，我们的界面遵循：

- **Less but better** — 少即是多
- 每个像素都必须服务于功能或情感
- 删除任何不必要的装饰、边框、阴影
- 空白是设计的一部分，不是"浪费"

### 1.3 尊重注意力 (Respect Attention)

基于 [PHILOSOPHY.md](PHILOSOPHY.md) 中的"注意力稀缺性"研究：

- **无红点、无徽章** — 我们不制造人为的焦虑
- **无弹窗打断** — 除非用户主动触发
- **低对比度次要信息** — 不争夺视觉焦点
- **渐进式披露** — 复杂信息按需展开

### 1.4 即时反馈 (Immediate Feedback)

基于心流理论的"即时反馈"要求：

- 每个点击在 100ms 内必须有视觉响应
- 动画是反馈的载体，不是装饰
- 状态变化必须可见、可感知

---

## 第二部分：色彩系统

### 2.1 色彩哲学

我们的色彩系统不是随意选择的。每一种颜色都承载着隐喻意义：

```
暴风雨的夜空 (背景)
    ↓
云层与雾气 (表面/卡片)
    ↓
风的灰蓝 (待办状态)
    ↓
雨的电蓝 (完成中状态)
    ↓
晴空的翠绿 (已完成状态)
    ↓
日出的金色 (庆祝)
```

### 2.2 主色板 (基于 Tokyo Night)

#### 背景色 - 暴风之夜

| 名称 | HEX | RGB | 用途 |
|------|-----|-----|------|
| `background` | `#1a1b26` | 26, 27, 38 | 主背景 — 暴风雨的夜空 |
| `surface` | `#24283b` | 36, 40, 59 | 卡片背景 — 低沉的云层 |
| `surface_hover` | `#2f3549` | 47, 53, 73 | 悬停状态 — 云层翻涌 |

#### 文本色 - 雾与光

| 名称 | HEX | 用途 |
|------|-----|------|
| `text_primary` | `#a9b1d6` | 主要文本 — 月光穿透云层 |
| `text_secondary` | `#565f89` | 次要文本 — 远处的雾气 |
| `text_accent` | `#7aa2f7` | 强调文本 — 闪电的余光 |

#### 状态色 - 风雨晴

| 名称 | HEX | 隐喻 | 用途 |
|------|-----|------|------|
| `state_pending` | `#414868` | 风灰 | 待办任务的状态指示器 |
| `state_completing` | `#7aa2f7` | 雨蓝 | 完成动画中的颜色 |
| `state_done` | `#9ece6a` | 晴绿 | 已完成任务的标记 |

#### 优先级色 - 风暴强度

| 名称 | HEX | 隐喻 | 用途 |
|------|-----|------|------|
| `priority_high` | `#f7768e` | 暴风红 | 高优先级标签 |
| `priority_high_bg` | `#f7768e1a` | — | 高优先级背景 (10% 透明度) |
| `priority_medium` | `#e0af68` | 闪电黄 | 中优先级标签 |
| `priority_medium_bg` | `#e0af681a` | — | 中优先级背景 |
| `priority_low` | `#565f89` | 微风灰 | 低优先级标签 |
| `priority_low_bg` | `#565f891a` | — | 低优先级背景 |

#### 晴空模式 (Clear Sky)

当所有任务完成时激活的特殊色彩：

| 名称 | HEX | 隐喻 |
|------|-----|------|
| `clear_sky_background` | `#1a1f36` | 黎明前的天空 |
| `clear_sky_accent` | `#ffc777` | 日出的第一缕金光 |

---

## 第三部分：排版系统

### 3.1 字体选择

- **主字体**: 系统默认无衬线字体
  - Windows: Segoe UI
  - macOS: SF Pro
  - Linux: Ubuntu / Noto Sans
- **等宽字体**: 用于代码或技术内容

### 3.2 字体大小

| 用途 | 大小 | 权重 |
|------|------|------|
| 标题 (Header) | 20px | Bold |
| 副标题 | 14px | Regular |
| 正文 (Task Content) | 14px | Regular |
| 元数据 (Priority/Date) | 12px | Regular |
| 辅助文本 | 11px | Regular |

---

## 第四部分：间距与布局

### 4.1 间距系统 (8px 基准)

| 名称 | 值 | 用途 |
|------|-----|------|
| `PADDING_SM` | 8px | 元素内部小间距 |
| `PADDING_MD` | 16px | 标准间距 |
| `PADDING_LG` | 24px | 区域间的大间距 |

### 4.2 圆角系统

| 名称 | 值 | 用途 |
|------|-----|------|
| `RADIUS_SM` | 4px | 小元素、标签 |
| `RADIUS_MD` | 8px | 卡片、按钮 |
| `RADIUS_LG` | 12px | 大型容器 |

### 4.3 布局结构

```
┌──────────────────────────────────────────────┐
│                   Header                      │  <- 固定高度
│  Waloyo  ·  We Overcome                      │
│  3 pending · 2 overcome                       │
├──────────────────────────────────────────────┤
│                 Task Input                    │  <- 固定高度
│  ○  Add a new task to overcome...            │
├──────────────────────────────────────────────┤
│                                              │
│                 Task List                     │  <- 弹性高度，可滚动
│  ┌──────────────────────────────────────┐   │
│  │ ○  Task 1 content                     │   │
│  │    Low · 📅 Tomorrow                  │   │
│  └──────────────────────────────────────┘   │
│  ┌──────────────────────────────────────┐   │
│  │ ○  Task 2 content                     │   │
│  │    High · 📅 Today                    │   │
│  └──────────────────────────────────────┘   │
│                                              │
├──────────────────────────────────────────────┤
│              Completed Section               │  <- 可折叠
│  ✓ Overcome (2)                              │
│  ━━ Task 3 (struck through)                 │
└──────────────────────────────────────────────┘
```

---

## 第五部分：动画系统

### 5.1 动画哲学

动画在 Waloyo 中不是"炫技"，而是服务于三个目的：

1. **反馈** — 告诉用户"你的操作被接收了"
2. **隐喻强化** — 让"风与雨"的概念具象化
3. **情绪共鸣** — 完成任务时的满足感

### 5.2 时长规范

| 名称 | 值 | 用途 | 心理效果 |
|------|-----|------|---------|
| `ANIM_FAST` | 150ms | 微交互 (hover, focus) | 即时响应感 |
| `ANIM_NORMAL` | 300ms | 标准过渡 | 平滑但不拖沓 |
| `ANIM_SLOW` | 600ms | 复杂动画 | 仪式感 |
| `ANIM_RAIN_DROP` | 800ms | 雨滴下落 | 完成的"释放"感 |
| `ANIM_WIND_SWAY` | 3000ms | 风摇摆周期 | 持续的"活着"感 |

### 5.3 核心动画定义

#### Wind Sway (风中摇曳) — 待办任务

```rust
// 实现于 animations.rs
fn wind_sway(self, id: ElementId, active: bool) -> AnyElement
```

- **触发条件**: 任务处于 Pending 状态
- **视觉效果**: 水平方向 ±3px 的轻微摇摆
- **周期**: 3秒
- **缓动函数**: 自定义正弦波 (`wind_sway_easing`)
- **隐喻意义**: 风是动态的、不安定的——提醒用户这些"挑战"仍在等待

#### Rain Drop (雨滴下落) — 完成任务

```rust
// 实现于 animations.rs
fn rain_drop(self, id: ElementId, active: bool) -> AnyElement
```

- **触发条件**: 用户点击完成
- **视觉效果**: 
  - 背景变为雨蓝
  - 向下位移 80px
  - 透明度从 1.0 降至 0.3
- **时长**: 800ms
- **缓动函数**: `ease_in_out`
- **隐喻意义**: 雨水落下，挑战被"冲刷"掉，转化为经验

#### Clear Sky (晴空庆祝) — 全部完成

```rust
// 实现于 animations.rs
fn clear_sky(self, id: ElementId, active: bool) -> AnyElement
```

- **触发条件**: 所有任务完成
- **视觉效果**: 背景渐变出金色光晕
- **时长**: 2000ms
- **隐喻意义**: 暴风雨过去，阳光洒下——你值得这一刻的平静

---

## 第六部分：组件设计

### 6.1 TaskItem 组件

```
┌────────────────────────────────────────────────────────┐
│ ○  完成报告并提交给领导                                   × │
│    High · 📅 Today                                      │
└────────────────────────────────────────────────────────┘
  ↑   ↑                                                 ↑
  │   │                                                 │
  │   └─ Content Area (可点击进入编辑)                    └─ Delete Button
  │
  └─ State Indicator (点击完成任务)
```

**交互区域分离**:
- 点击 **状态指示器** → 完成任务
- 点击 **内容区域** → 编辑任务
- 点击 **删除按钮** → 删除任务

### 6.2 TaskInput 组件

```
┌────────────────────────────────────────────────────────┐
│ ○  Add a new task to overcome...                       │
└────────────────────────────────────────────────────────┘
```

**智能解析语法**:
- `!h`, `!m`, `!l` → 优先级
- `@today`, `@tomorrow` → 截止日期
- (未来) `#tag` → 标签

### 6.3 Notes 展开区域 (规划中)

```
┌────────────────────────────────────────────────────────┐
│ ○  完成报告并提交给领导                               ▼  × │
│    High · 📅 Today                                      │
├────────────────────────────────────────────────────────┤
│ 📝 Notes:                                              │
│ 这个报告需要包含Q4的销售数据。记得问张三要最新的Excel。    │
│ 领导下午3点前需要。                                      │
└────────────────────────────────────────────────────────┘
```

---

## 第七部分：交互设计

### 7.1 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+Z` | 撤销上一步操作 |
| `Enter` | 提交新任务 |
| `Escape` | 取消编辑 |
| (未来) `J/K` | 上下导航 |
| (未来) `D` | 删除选中任务 |

### 7.2 鼠标交互

| 状态 | 视觉反馈 |
|------|---------|
| Hover | 背景色变亮 (`surface_hover`) |
| Active/Pressed | 轻微缩放 (0.98) |
| Focus | 边框变为 `accent_primary` |

---

## 第八部分：响应式与无障碍

### 8.1 响应式设计

当前设计针对桌面端 (420x680 默认尺寸)。

| 窗口宽度 | 调整策略 |
|---------|---------|
| < 360px | 减少水平边距，隐藏非必要元素 |
| 360-600px | 标准移动端布局 |
| 600-900px | 标准桌面布局 |
| > 900px | 限制最大宽度 (600px)，居中显示 |

### 8.2 无障碍 (Accessibility)

1. **颜色对比度**: 所有文本与背景对比度符合 WCAG AA 标准 (4.5:1+)
2. **焦点可见性**: 所有交互元素有清晰的焦点指示器
3. **动画减弱**: 未来将响应系统的 `prefers-reduced-motion` 设置
4. **屏幕阅读器**: 语义化的 ARIA 标签 (未来)

---

## 附录：设计决策记录 (ADR)

### ADR-001: 为什么不使用传统的复选框？

**问题**: 大多数 Todo 应用使用方形复选框表示完成状态。

**决策**: 使用圆形状态指示器。

**理由**: 
1. 圆形更符合"雨滴"的隐喻
2. 圆形在视觉上更柔和，减少"任务=压力"的潜意识关联
3. 复选框过于"工业化"，与我们的自然主题不符

### ADR-002: 为什么优先级只有三级？

**问题**: 有些系统使用 P0-P5 六级优先级。

**决策**: 仅使用 High/Medium/Low 三级。

**理由**:
1. 基于 [PHILOSOPHY.md](PHILOSOPHY.md) 中的"决策疲劳"研究，更多选项会增加认知负担
2. 三级足以区分"紧急"、"正常"和"闲暇"
3. 简单的系统更容易被一致地使用

### ADR-003: 为什么不显示"生产力分数"？

**问题**: 许多效率应用会显示每日/每周的完成数量统计。

**决策**: 只显示基本计数 (pending/overcome)，不显示趋势图或分数。

**理由**:
1. 基于 [PHILOSOPHY.md](PHILOSOPHY.md) 中的"过度合理化效应"，外部指标会腐蚀内在动机
2. 我们希望用户因为任务"有意义"而完成，而非为了"提高分数"
3. 幸福感来自 PERMA 的平衡，而非单一的"成就"维度

---

*最后更新：2025年12月*
